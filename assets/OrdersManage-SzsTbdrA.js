import{_ as b,a as c,c as n,b as t,F as h,j as y,n as g,i as p,l as m,v as _,f as k,t as i,k as v,o as r}from"./index-aRQ9i-Q4.js";const x={data(){return{displayitem:{},pages:{},editdata:{data:{}}}},methods:{displayData(l=1){console.log("displayData"),l==="prev"?l=this.current_page-1:l==="next"&&(l=this.current_page+1);const a=`https://ec-course-api.hexschool.io/v2/api/tsurusroute/admin/orders?page=${l}`;c.get(a).then(d=>{console.log("response",d.data),this.displayitem={},this.displayitem=d.data.orders,this.pages=d.data.pagination}).catch(d=>{console.log("error",d)})},showdeleteAlert(l){console.log("showdeleteAlert",l);const a=`https://ec-course-api.hexschool.io/v2/api/tsurusroute/admin/order/${l}`;c.delete(a).then(d=>{alert(d.data.message),this.displayData()}).catch(d=>{console.log("error del",d)})},showedit(l,a){this.editdata.data=a},showeditAlert(l){console.log("showdeleteAlert id",l);const a=`https://ec-course-api.hexschool.io/v2/api/tsurusroute/admin/order/${l}`;c.put(a,this.editdata).then(d=>{this.displayData()}).catch(d=>{console.log("error del",d)})},updatepayment(l){console.log("updatepayment",l),this.editdata.data=l;const a=`https://ec-course-api.hexschool.io/v2/api/tsurusroute/admin/order/${l.id}`;c.put(a,this.editdata).then(d=>{console.log("updatepayment res",d),this.displayData()}).catch(d=>{console.log("error del",d)})}},mounted(){console.log("mounted"),this.displayData()}},f=t("h1",null,"訂單管理",-1),C={class:"table mt-4"},D=t("thead",null,[t("tr",null,[t("th",{width:"120"}," 訂單編號 "),t("th",{width:"300"},"顧客名稱"),t("th",{width:"300"}," 訂單詳細 "),t("th",{width:"120"}," 總金額 "),t("th",{width:"120"}," 付款狀態 "),t("th",null," 備註 "),t("th",null," 更多 ")])],-1),w={class:"list-unstyled"},V={class:"list-unstyled"},U=["onUpdate:modelValue","checked","onChange"],A={for:"ispaid"},N={class:"btn-group"},B=["onClick"],M=["onClick"],T={"aria-label":"Page navigation example"},E={class:"pagination"},F=t("span",{class:"page-link","aria-label":"Previous"},[t("span",{"aria-hidden":"true"},"«")],-1),P=[F],j=["onClick"],q=t("span",{class:"page-link","aria-label":"Next"},[t("span",{"aria-hidden":"true"},"»")],-1),z=[q],L={key:0},O=t("label",{for:"paystatus"},"付款狀態",-1),S=t("label",{for:"name"},"名稱",-1),G=t("label",{for:"address"},"住址",-1),H=t("label",{for:"email"},"電子信箱",-1),I=t("label",{for:"tel"},"電話",-1);function J(l,a,d,K,s,u){return r(),n(h,null,[f,t("table",C,[D,t("tbody",null,[(r(!0),n(h,null,y(s.displayitem,e=>(r(),n("tr",{key:e.id},[t("td",null,i(e.create_at),1),t("td",null,[t("ul",w,[t("li",null,"名稱："+i(e.user.name),1),t("li",null,"Email："+i(e.user.email),1),t("li",null,"Tel："+i(e.user.tel),1),t("li",null,"住址:"+i(e.user.address),1)])]),t("td",null,[t("ul",V,[(r(!0),n(h,null,y(e.products,o=>(r(),n("li",{key:o.id}," 產品名稱: "+i(o.product.title)+" 數量："+i(o.qty)+" 金額："+i(o.total),1))),128))])]),t("td",null,i(e.total),1),t("td",null,[p(t("input",{type:"checkbox","onUpdate:modelValue":o=>e.is_paid=o,checked:e.is_paid,id:"ispaid",onChange:o=>u.updatepayment(e)},null,40,U),[[m,e.is_paid]]),t("label",A,i(e.is_paid),1)]),t("td",null,i(e.message),1),t("td",null,[t("div",N,[t("button",{type:"button",class:"btn btn-outline-primary btn-sm",onClick:o=>u.showedit(e.id,e)},"編輯",8,B),t("button",{type:"button",class:"btn btn-outline-danger btn-sm",onClick:o=>u.showdeleteAlert(e.id)}," 刪除 ",8,M)])])]))),128))])]),t("nav",T,[t("ul",E,[t("li",{class:g(["page-item",{disabled:s.pages.has_pre===!1}]),onClick:a[0]||(a[0]=e=>u.displayData("prev"))},P,2),(r(!0),n(h,null,y(s.pages.total_pages,(e,o)=>(r(),n("li",{class:g(["page-item",{active:e===s.pages.current_page}]),key:o},[t("span",{class:"page-link",onClick:Q=>u.displayData(e)},i(e),9,j)],2))),128)),t("li",{class:g(["page-item",{disabled:s.pages.has_next===!1}]),onClick:a[1]||(a[1]=e=>u.displayData("next"))},z,2)])]),s.editdata.data.id?(r(),n("div",L,[p(t("input",{type:"checkbox",id:"paystatus","onUpdate:modelValue":a[2]||(a[2]=e=>s.editdata.data.is_paid=e)},null,512),[[m,s.editdata.data.is_paid]]),O,S,p(t("input",{type:"text",id:"name","onUpdate:modelValue":a[3]||(a[3]=e=>s.editdata.data.user.name=e)},null,512),[[_,s.editdata.data.user.name]]),G,p(t("input",{type:"text",id:"address","onUpdate:modelValue":a[4]||(a[4]=e=>s.editdata.data.user.address=e)},null,512),[[_,s.editdata.data.user.address]]),H,p(t("input",{type:"text",id:"email","onUpdate:modelValue":a[5]||(a[5]=e=>s.editdata.data.user.email=e)},null,512),[[_,s.editdata.data.user.email]]),I,p(t("input",{type:"text",id:"tel","onUpdate:modelValue":a[6]||(a[6]=e=>s.editdata.data.user.tel=e)},null,512),[[_,s.editdata.data.user.tel]]),t("button",{onClick:a[7]||(a[7]=e=>u.showeditAlert(s.editdata.data.id))},"更新"),k(" "+i(s.editdata),1)])):v("",!0)],64)}const W=b(x,[["render",J]]);export{W as default};
