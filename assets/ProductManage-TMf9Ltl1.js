import{_ as v,a as m,o as n,c as d,k as b,b as t,i as p,v as u,l as x,f as C,t as h,p as U,g as D,F as g,j as f,n as y,m as P,r as V}from"./index-aRQ9i-Q4.js";const A={props:["apitype"],emits:["redenerstatus"],data(){return{datato:{data:{title:"",content:"",category:"",imagesUrl:["圖片網址一","圖片網址二","圖片網址三"],is_enabled:!1,price:0,origin_price:0,unit:"本",description:"",imageUrl:""}},redenerstatus:!1}},methods:{Addapi(s){if(console.log("Add",s),s.type==="add")console.log("in add api"),m.post("https://ec-course-api.hexschool.io/v2/api/tsurusroute/admin/product",this.datato).then(e=>{console.log("add api response",e),alert(e.data.message),this.redenerstatus=!0,this.emit(),this.datato.data={data:{title:"",content:"",category:"",imagesUrl:["","",""],is_enabled:!1,price:0,origin_price:0,unit:"本",description:"",imageUrl:""}}}).catch(e=>{console.log("error",e),this.redenerstatus=!1});else if(s.type==="edit"){console.log("in edit api");const o=`https://ec-course-api.hexschool.io/v2/api/tsurusroute/admin/product/${s.id}`;console.log("editapi",o),m.put(o,this.datato).then(e=>{console.log("editapi res",e),alert(e.data.message),this.redenerstatus=!0,this.emit()}).catch(e=>{console.log("error",e),this.redenerstatus=!1})}},emit(){console.log("emit"),this.$emit("redenerstatus",this.redenerstatus)},passapiresult(){console.log("passapiresult"),this.$emit("api-response","go")}},mounted(){console.log("mounted apitype")},watch:{apitype:{handler(s){console.log("apitype change",this.apitype.item),this.datato.data=this.apitype.item},deep:!0}}},r=s=>(U("data-v-dca64c6a"),s=s(),D(),s),w={key:0,class:"mb-4"},I={key:1,class:"mb-4"},N={class:"row g-3"},R={class:"col-md-6"},B=r(()=>t("label",{for:"inputName",class:"form-label"},"品名",-1)),M={class:"col-md-6"},S=r(()=>t("label",{for:"inputCategory",class:"form-label"},"分類",-1)),T={class:"col-6"},F=r(()=>t("label",{for:"inputOriginPrice",class:"form-label"},"原價",-1)),O={class:"col-6"},$=r(()=>t("label",{for:"inputPrice",class:"form-label"},"價格",-1)),j={class:"col-12"},z=r(()=>t("label",{for:"inputDescription",class:"form-label"},"描述",-1)),E={class:"col-12"},L=r(()=>t("label",{for:"inputContent",class:"form-label"},"內容規格",-1)),q={class:"col-6"},G=r(()=>t("label",{for:"inputImageUrl",class:"form-label"},"主圖片",-1)),H={class:"col-6"},J=r(()=>t("label",{for:"",style:{opacity:"0"}},"啟用",-1)),K={class:"form-check"},Q=["checked"],W=r(()=>t("label",{class:"form-check-label",for:"gridCheck"}," 啟用打勾 ",-1)),X=r(()=>t("div",{class:"col-6"},[t("img",{src:"",style:{height:"100%"}})],-1)),Y={class:"col-12"};function Z(s,o,e,k,a,c){return n(),d("div",null,[e.apitype.type==="add"?(n(),d("h3",w,"新增產品")):b("",!0),e.apitype.type==="edit"?(n(),d("h3",I,"編輯產品")):b("",!0),t("form",N,[t("div",R,[B,p(t("input",{type:"text",class:"form-control",id:"inputName","onUpdate:modelValue":o[0]||(o[0]=i=>a.datato.data.title=i)},null,512),[[u,a.datato.data.title]])]),t("div",M,[S,p(t("input",{type:"text",class:"form-control",id:"inputCategory","onUpdate:modelValue":o[1]||(o[1]=i=>a.datato.data.category=i)},null,512),[[u,a.datato.data.category]])]),t("div",T,[F,p(t("input",{type:"number",class:"form-control",id:"inputOriginPrice","onUpdate:modelValue":o[2]||(o[2]=i=>a.datato.data.origin_price=i)},null,512),[[u,a.datato.data.origin_price]])]),t("div",O,[$,p(t("input",{type:"number",class:"form-control",id:"inputPrice","onUpdate:modelValue":o[3]||(o[3]=i=>a.datato.data.price=i)},null,512),[[u,a.datato.data.price]])]),t("div",j,[z,p(t("input",{type:"text",class:"form-control",id:"inputDescription","onUpdate:modelValue":o[4]||(o[4]=i=>a.datato.data.description=i)},null,512),[[u,a.datato.data.description]])]),t("div",E,[L,p(t("input",{type:"text",class:"form-control",id:"inputContent","onUpdate:modelValue":o[5]||(o[5]=i=>a.datato.data.content=i)},null,512),[[u,a.datato.data.content]])]),t("div",q,[G,p(t("input",{type:"text",class:"form-control",id:"inputImageUrl","onUpdate:modelValue":o[6]||(o[6]=i=>a.datato.data.imgUrl=i)},null,512),[[u,a.datato.data.imgUrl]])]),t("div",H,[J,t("div",K,[p(t("input",{class:"form-check-input",type:"checkbox",id:"gridCheck","onUpdate:modelValue":o[7]||(o[7]=i=>a.datato.data.is_enabled=i),checked:a.datato.data.is_enabled},null,8,Q),[[x,a.datato.data.is_enabled]]),W])]),X,t("div",Y,[t("button",{type:"submit",class:"btn btn-primary",onClick:o[8]||(o[8]=i=>c.Addapi(e.apitype))},"確認")])]),C(" "+h(e.apitype)+" ",1),t("div",null,h(a.datato.data),1)])}const tt=v(A,[["render",Z],["__scopeId","data-v-dca64c6a"]]),et={components:{AddProduct:tt},data(){return{showAddProduct:!0,loginstatus:!0,displayitem:{},editTemp:{data:{}},modeltype:{type:"",id:"",item:{title:"",content:"",category:"",imagesUrl:["圖片網址一","圖片網址二","圖片網址三"],is_enabled:!1,price:0,origin_price:0,unit:"本",description:"",imageUrl:""}},pages:{},rerender:!1}},methods:{openaddmodel(s,o,e){this.modeltype.type=s,this.modeltype.id=o,this.modeltype.item={...e}},displayData(s=1){console.log("displayData",s),s==="prev"?s=this.current_page-1:s==="next"&&(s=this.current_page+1);const o=`https://ec-course-api.hexschool.io/v2/api/tsurusroute/admin/products?page=${s}`;m.get(o).then(e=>{console.log("response",e.data),this.displayitem=e.data.products,this.pages=e.data.pagination}).catch(e=>{console.log("error",e)})},editData(s){console.log("editData",s);const o=`https://ec-course-api.hexschool.io/v2/api/tsurusroute/admin/product/${s}`;m.put(o,this.editTemp).then(e=>{console.log("response",e.data),this.displayitem=e.data.products,alert(e.data.message),this.displayData()}).catch(e=>{console.log("error",e)})},controllerRender(s){console.log("controllerRender",s),this.rerender=s,this.rerender===!0&&m.get("https://ec-course-api.hexschool.io/v2/api/tsurusroute/admin/products?page=2").then(e=>{console.log("response",e.data.products),this.displayitem=e.data.products,this.displayData(),this.modeltype.type="",this.modeltype.id="",this.modeltype.item={title:"",content:"",category:"",imagesUrl:["圖片網址一","圖片網址二","圖片網址三"],is_enabled:!1,price:0,origin_price:0,unit:"本",description:"",imageUrl:""}}).catch(e=>{console.log("error",e)})},showdeleteAlert(s){console.log("id",s);const o=`https://ec-course-api.hexschool.io/v2/api/tsurusroute/admin/product/${s}`;m.delete(o).then(e=>{console.log("response",e),alert(e.data.message),this.displayData()}).catch(e=>{console.log("error",e)})},getapiResult(s){console.log("apiresponse",s)}},mounted(){console.log("mounted"),this.displayData()}},ot=t("h1",null,"產品管理",-1),st={class:"text-end mt-4"},at={class:"table mt-4"},it=t("thead",null,[t("tr",null,[t("th",{width:"120"}," 分類 "),t("th",null,"產品名稱"),t("th",{width:"120"}," 原價 "),t("th",{width:"120"}," 售價 "),t("th",{width:"100"}," 是否啟用 "),t("th",{width:"120"}," 編輯 ")])],-1),lt={key:0,class:"text-success"},nt={key:1},dt={class:"btn-group"},rt=["onClick"],ct=["onClick"],pt=t("form",{action:"https://ec-course-api.hexschool.io/v2/api/tsurusroute/admin/upload",enctype:"multipart/form-data",method:"post"},[t("input",{type:"file",name:"file-to-upload"}),t("input",{type:"submit",value:"Upload"})],-1),ut={"aria-label":"Page navigation example"},ht={class:"pagination"},mt=t("span",{class:"page-link","aria-label":"Previous"},[t("span",{"aria-hidden":"true"},"«")],-1),_t=[mt],gt=["onClick"],yt=t("span",{class:"page-link","aria-label":"Next"},[t("span",{"aria-hidden":"true"},"»")],-1),bt=[yt];function ft(s,o,e,k,a,c){const i=V("AddProduct");return n(),d(g,null,[ot,t("div",st,[t("button",{type:"button",class:"btn btn-primary","data-bs-toggle":"modal","data-bs-target":"#addMmodelComponent",onClick:o[0]||(o[0]=l=>c.openaddmodel("add",0,a.modeltype.item))}," 新增產品 ")]),t("table",at,[it,t("tbody",null,[(n(!0),d(g,null,f(a.displayitem,l=>(n(),d("tr",{key:l.id},[t("td",null,h(l.category),1),t("td",null,h(l.title),1),t("td",null,h(l.origin_price),1),t("td",null,h(l.price),1),t("td",null,[l.is_enabled?(n(),d("span",lt,"啟用")):(n(),d("span",nt,"未啟用"))]),t("td",null,[t("div",dt,[t("button",{type:"button",class:"btn btn-outline-primary btn-sm",onClick:_=>c.openaddmodel("edit",l.id,l)},"編輯",8,rt),t("button",{type:"button",class:"btn btn-outline-danger btn-sm",onClick:_=>c.showdeleteAlert(l.id)}," 刪除 ",8,ct)])])]))),128))])]),pt,t("nav",ut,[t("ul",ht,[t("li",{class:y(["page-item",{disabled:a.pages.has_pre===!1}]),onClick:o[1]||(o[1]=l=>c.displayData("prev"))},_t,2),(n(!0),d(g,null,f(a.pages.total_pages,(l,_)=>(n(),d("li",{class:y(["page-item",{active:l===a.pages.current_page}]),key:_},[t("span",{class:"page-link",onClick:vt=>c.displayData(l)},h(l),9,gt)],2))),128)),t("li",{class:y(["page-item",{disabled:a.pages.has_next===!1}]),onClick:o[2]||(o[2]=l=>c.displayData("next"))},bt,2)])]),a.showAddProduct?(n(),P(i,{key:0,apitype:a.modeltype,onRedenerstatus:c.controllerRender},null,8,["apitype","onRedenerstatus"])):b("",!0)],64)}const xt=v(et,[["render",ft]]);export{xt as default};
